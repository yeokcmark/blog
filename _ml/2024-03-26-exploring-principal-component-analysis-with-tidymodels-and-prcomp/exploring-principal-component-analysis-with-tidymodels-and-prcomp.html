<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { color: #00769e; background-color: #f1f3f5; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #00769e; } /* Normal */
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #657422; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #00769e; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #00769e; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #00769e; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>


  <!--radix_placeholder_meta_tags-->
  <title>Exploring Principal Component Analysis with tidymodels and prcomp</title>

  <meta property="description" itemprop="description" content="We ran out of time during class due to the immense amount of material that needed to be covered. Hence, these assessment questions became homework assignments. Within, you will find explorations of PCA using the tidymodel way, as well as using prcomp from Base R."/>


  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2024-03-26"/>
  <meta property="article:created" itemprop="dateCreated" content="2024-03-26"/>

  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="Exploring Principal Component Analysis with tidymodels and prcomp"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="We ran out of time during class due to the immense amount of material that needed to be covered. Hence, these assessment questions became homework assignments. Within, you will find explorations of PCA using the tidymodel way, as well as using prcomp from Base R."/>
  <meta property="og:locale" content="en_US"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="Exploring Principal Component Analysis with tidymodels and prcomp"/>
  <meta property="twitter:description" content="We ran out of time during class due to the immense amount of material that needed to be covered. Hence, these assessment questions became homework assignments. Within, you will find explorations of PCA using the tidymodel way, as well as using prcomp from Base R."/>

  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","date","categories","output","editor_options"]}},"value":[{"type":"character","attributes":{},"value":["Exploring Principal Component Analysis with tidymodels and prcomp"]},{"type":"character","attributes":{},"value":["We ran out of time during class due to the immense amount of material that needed to be covered. Hence, these assessment questions became homework assignments. Within, you will find explorations of PCA using the tidymodel way, as well as using prcomp from Base R.\n"]},{"type":"character","attributes":{},"value":["2024-03-26"]},{"type":"character","attributes":{},"value":["PCA","tidymodels","prcomp"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["toc","toc_depth","toc_float","self_contained"]}},"value":[{"type":"logical","attributes":{},"value":[true]},{"type":"integer","attributes":{},"value":[6]},{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[false]}]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["chunk_output_type"]}},"value":[{"type":"character","attributes":{},"value":["console"]}]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["bc.csv","diamonds.csv","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/anchor-4.2.2/anchor.min.js","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/bowser-1.9.3/bowser.min.js","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/crosstalk-1.2.1/css/crosstalk.min.css","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/crosstalk-1.2.1/js/crosstalk.js","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/crosstalk-1.2.1/js/crosstalk.js.map","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/crosstalk-1.2.1/js/crosstalk.min.js","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/crosstalk-1.2.1/js/crosstalk.min.js.map","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/crosstalk-1.2.1/scss/crosstalk.scss","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/datatables-binding-0.32/datatables.js","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/datatables-css-0.0.0/datatables-crosstalk.css","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/distill-2.2.21/template.v2.js","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/dt-core-1.13.6/css/jquery.dataTables.extra.css","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/dt-core-1.13.6/css/jquery.dataTables.min.css","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/dt-core-1.13.6/js/jquery.dataTables.min.js","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/figure-html5/unnamed-chunk-11-1.png","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/figure-html5/unnamed-chunk-12-1.png","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/figure-html5/unnamed-chunk-14-1.png","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/figure-html5/unnamed-chunk-15-1.png","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/figure-html5/unnamed-chunk-16-1.png","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/figure-html5/unnamed-chunk-4-1.png","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/figure-html5/unnamed-chunk-4-2.png","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/figure-html5/unnamed-chunk-6-1.png","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/figure-html5/unnamed-chunk-8-1.png","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/figure-html5/unnamed-chunk-9-1.png","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/header-attrs-2.26/header-attrs.js","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/htmlwidgets-1.6.4/htmlwidgets.js","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/jquery-3.6.0/jquery-3.6.0.js","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/jquery-3.6.0/jquery-3.6.0.min.js","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/jquery-3.6.0/jquery-3.6.0.min.map","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/popper-2.6.0/popper.min.js","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/tippy-6.2.7/tippy-bundle.umd.min.js","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/tippy-6.2.7/tippy-light-border.css","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/tippy-6.2.7/tippy.css","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/tippy-6.2.7/tippy.umd.min.js","exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/webcomponents-2.0.0/webcomponents.js","housing.csv","wine.csv"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
    font-size: 100%;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  hr.section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    margin: 0px;
  }


  d-byline {
    border-top: none;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
    border-top: none;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  d-article details {
    grid-column: text;
    margin-bottom: 0.8em;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  /* tweak for Pandoc numbered line within distill */
  d-article pre.numberSource code > span {
      left: -2em;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }

  /* Citation hover box */

  .tippy-box[data-theme~=light-border] {
    background-color: rgba(250, 250, 250, 0.95);
  }

  .tippy-content > p {
    margin-bottom: 0;
    padding: 2px;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // separator
    var separator = '<hr class="section-separator" style="clear: both"/>';
    // prepend separator above appendix
    $('.d-byline').before(separator);
    $('.d-article').before(separator);

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('details, div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme, except when numbering line
    // in code chunk
    $('pre:not(.numberLines) code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        var author_name = front_matter.authors[i].author
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', author_name ? 'ORCID ID for ' + author_name : 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // hoverable references
      $('span.citation[data-cites]').each(function() {
        const citeChild = $(this).children()[0]
        // Do not process if @xyz has been used without escaping and without bibliography activated
        // https://github.com/rstudio/distill/issues/466
        if (citeChild === undefined) return true

        if (citeChild.nodeName == "D-FOOTNOTE") {
          var fn = citeChild
          $(this).html(fn.shadowRoot.querySelector("sup"))
          $(this).id = fn.id
          fn.remove()
        }
        var refs = $(this).attr('data-cites').split(" ");
        var refHtml = refs.map(function(ref) {
          // Could use CSS.escape too here, we insure backward compatibility in navigator
          return "<p>" + $('div[id="ref-' + ref + '"]').html() + "</p>";
        }).join("\n");
        window.tippy(this, {
          allowHTML: true,
          content: refHtml,
          maxWidth: 500,
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        });
      });

      // fix footnotes in tables (#411)
      // replacing broken distill.pub feature
      $('table d-footnote').each(function() {
        // we replace internal showAtNode methode which is triggered when hovering a footnote
        this.hoverBox.showAtNode = function(node) {
          // ported from https://github.com/distillpub/template/pull/105/files
          calcOffset = function(elem) {
              let x = elem.offsetLeft;
              let y = elem.offsetTop;
              // Traverse upwards until an `absolute` element is found or `elem`
              // becomes null.
              while (elem = elem.offsetParent && elem.style.position != 'absolute') {
                  x += elem.offsetLeft;
                  y += elem.offsetTop;
              }

              return { left: x, top: y };
          }
          // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetTop
          const bbox = node.getBoundingClientRect();
          const offset = calcOffset(node);
          this.show([offset.left + bbox.width, offset.top + bbox.height]);
        }
      })

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      // ignore leaflet img layers (#106)
      figures = figures.filter(':not(img[class*="leaflet"])')
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace(/^index[.]html/, "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <!--/radix_placeholder_distill-->
  <script src="exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/header-attrs-2.26/header-attrs.js"></script>
  <script src="exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/htmlwidgets-1.6.4/htmlwidgets.js"></script>
  <link href="exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
  <script src="exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/datatables-binding-0.32/datatables.js"></script>
  <script src="exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <link href="exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet" />
  <link href="exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet" />
  <script src="exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
  <link href="exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
  <script src="exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/crosstalk-1.2.1/js/crosstalk.min.js"></script>
  <script src="exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/popper-2.6.0/popper.min.js"></script>
  <link href="exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/anchor-4.2.2/anchor.min.js"></script>
  <script src="exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/bowser-1.9.3/bowser.min.js"></script>
  <script src="exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Exploring Principal Component Analysis with tidymodels and prcomp","description":"We ran out of time during class due to the immense amount of material that needed to be covered. Hence, these assessment questions became homework assignments. Within, you will find explorations of PCA using the tidymodel way, as well as using prcomp from Base R.","authors":[],"publishedDate":"2024-03-26T00:00:00.000+08:00"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Exploring Principal Component Analysis with tidymodels and prcomp</h1>

<!--radix_placeholder_categories-->
<div class="dt-tags">
<div class="dt-tag">PCA</div>
<div class="dt-tag">tidymodels</div>
<div class="dt-tag">prcomp</div>
</div>
<!--/radix_placeholder_categories-->
<p><p>We ran out of time during class due to the immense amount of material that needed to be covered. Hence, these assessment questions became homework assignments. Within, you will find explorations of PCA using the tidymodel way, as well as using prcomp from Base R.</p></p>
</div>


<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#introduction" id="toc-introduction">Introduction</a></li>
<li><a href="#set-dependencies-and-import-data" id="toc-set-dependencies-and-import-data">Set Dependencies and Import Data</a></li>
<li><a href="#question-1" id="toc-question-1">Question 1:</a></li>
<li><a href="#question-2" id="toc-question-2">Question 2:</a></li>
<li><a href="#question-3" id="toc-question-3">Question 3:</a></li>
<li><a href="#question-4" id="toc-question-4">Question 4:</a></li>
</ul>
</nav>
</div>
<div class="layout-chunk" data-layout="l-body">
<style type="text/css">
d-byline {
  display: none;
  margin:0;
}

</style>
</div>
<h3 id="introduction">Introduction</h3>
<p>There are 4 questions to be answered. I didn’t list them here, but if you follow along, I’ve explored most concepts of PCA using the <code>tidymodel</code> way, as well as using <code>prcomp</code> from Base R.
Note that aesthetics were NOT a priority for me - hence most of the plots could definitely be improved upon.</p>
<h3 id="set-dependencies-and-import-data">Set Dependencies and Import Data</h3>
<p>Let’s begin by importing the necessary packages and data.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/rm.html'>rm</a></span><span class='op'>(</span>list <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ls.html'>ls</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span></span>
<span><span class='fu'>pacman</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/pacman/man/p_load.html'>p_load</a></span><span class='op'>(</span><span class='va'>tidyverse</span>, <span class='co'># tidy DS</span></span>
<span>               <span class='va'>tidymodels</span>, <span class='co'># tidy ML</span></span>
<span>               <span class='va'>skimr</span>, <span class='va'>GGally</span>, <span class='va'>Hmisc</span>, <span class='va'>broom</span>, <span class='va'>modelr</span>, <span class='va'>ggstatsplot</span>, <span class='co'># EDA 1</span></span>
<span>               <span class='va'>scales</span>, <span class='va'>ggthemes</span>, <span class='va'>gridExtra</span>, <span class='co'># ggplot2::</span></span>
<span>               <span class='va'>DT</span>, <span class='co'># for interactive data display</span></span>
<span>               <span class='va'>janitor</span>, <span class='va'>themis</span> <span class='co'># recipes::</span></span>
<span><span class='op'>)</span></span></code></pre>
</div>
</div>
<h3 id="question-1">Question 1:</h3>
<p>Load the data. We see that “Type” is probably an encoding for different types of wine with 3 levels. Change to a factor.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>wine</span> <span class='op'>&lt;-</span> <span class='fu'>read_csv</span><span class='op'>(</span><span class='st'>"wine.csv"</span><span class='op'>)</span></span>
<span><span class='fu'>skim</span><span class='op'>(</span><span class='va'>wine</span><span class='op'>)</span></span></code></pre>
</div>
<table>
<caption><span id="tab:unnamed-chunk-3">Table 1: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">wine</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">178</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">14</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">14</td>
</tr>
<tr class="odd">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table style="width:100%;">
<colgroup>
<col style="width: 16%" />
<col style="width: 10%" />
<col style="width: 14%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 8%" />
<col style="width: 6%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Type</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.94</td>
<td style="text-align: right;">0.78</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2.00</td>
<td style="text-align: right;">3.00</td>
<td style="text-align: right;">3.00</td>
<td style="text-align: left;">▆▁▇▁▆</td>
</tr>
<tr class="even">
<td style="text-align: left;">Alcohol</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">13.00</td>
<td style="text-align: right;">0.81</td>
<td style="text-align: right;">11.03</td>
<td style="text-align: right;">12.36</td>
<td style="text-align: right;">13.05</td>
<td style="text-align: right;">13.68</td>
<td style="text-align: right;">14.83</td>
<td style="text-align: left;">▂▇▇▇▃</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Malic</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.34</td>
<td style="text-align: right;">1.12</td>
<td style="text-align: right;">0.74</td>
<td style="text-align: right;">1.60</td>
<td style="text-align: right;">1.87</td>
<td style="text-align: right;">3.08</td>
<td style="text-align: right;">5.80</td>
<td style="text-align: left;">▇▅▂▂▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Ash</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.37</td>
<td style="text-align: right;">0.27</td>
<td style="text-align: right;">1.36</td>
<td style="text-align: right;">2.21</td>
<td style="text-align: right;">2.36</td>
<td style="text-align: right;">2.56</td>
<td style="text-align: right;">3.23</td>
<td style="text-align: left;">▁▂▇▅▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Alcalinity</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">19.49</td>
<td style="text-align: right;">3.34</td>
<td style="text-align: right;">10.60</td>
<td style="text-align: right;">17.20</td>
<td style="text-align: right;">19.50</td>
<td style="text-align: right;">21.50</td>
<td style="text-align: right;">30.00</td>
<td style="text-align: left;">▁▆▇▃▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Magnesium</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">99.74</td>
<td style="text-align: right;">14.28</td>
<td style="text-align: right;">70.00</td>
<td style="text-align: right;">88.00</td>
<td style="text-align: right;">98.00</td>
<td style="text-align: right;">107.00</td>
<td style="text-align: right;">162.00</td>
<td style="text-align: left;">▅▇▃▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Phenols</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.30</td>
<td style="text-align: right;">0.63</td>
<td style="text-align: right;">0.98</td>
<td style="text-align: right;">1.74</td>
<td style="text-align: right;">2.36</td>
<td style="text-align: right;">2.80</td>
<td style="text-align: right;">3.88</td>
<td style="text-align: left;">▅▇▇▇▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Flavanoids</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.03</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">0.34</td>
<td style="text-align: right;">1.20</td>
<td style="text-align: right;">2.13</td>
<td style="text-align: right;">2.88</td>
<td style="text-align: right;">5.08</td>
<td style="text-align: left;">▆▆▇▂▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Nonflavanoids</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.36</td>
<td style="text-align: right;">0.12</td>
<td style="text-align: right;">0.13</td>
<td style="text-align: right;">0.27</td>
<td style="text-align: right;">0.34</td>
<td style="text-align: right;">0.44</td>
<td style="text-align: right;">0.66</td>
<td style="text-align: left;">▃▇▅▃▂</td>
</tr>
<tr class="even">
<td style="text-align: left;">Proanthocyanins</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.59</td>
<td style="text-align: right;">0.57</td>
<td style="text-align: right;">0.41</td>
<td style="text-align: right;">1.25</td>
<td style="text-align: right;">1.56</td>
<td style="text-align: right;">1.95</td>
<td style="text-align: right;">3.58</td>
<td style="text-align: left;">▃▇▆▂▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Color</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5.06</td>
<td style="text-align: right;">2.32</td>
<td style="text-align: right;">1.28</td>
<td style="text-align: right;">3.22</td>
<td style="text-align: right;">4.69</td>
<td style="text-align: right;">6.20</td>
<td style="text-align: right;">13.00</td>
<td style="text-align: left;">▆▇▃▂▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Hue</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.96</td>
<td style="text-align: right;">0.23</td>
<td style="text-align: right;">0.48</td>
<td style="text-align: right;">0.78</td>
<td style="text-align: right;">0.96</td>
<td style="text-align: right;">1.12</td>
<td style="text-align: right;">1.71</td>
<td style="text-align: left;">▅▇▇▃▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Dilution</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.61</td>
<td style="text-align: right;">0.71</td>
<td style="text-align: right;">1.27</td>
<td style="text-align: right;">1.94</td>
<td style="text-align: right;">2.78</td>
<td style="text-align: right;">3.17</td>
<td style="text-align: right;">4.00</td>
<td style="text-align: left;">▆▃▆▇▃</td>
</tr>
<tr class="even">
<td style="text-align: left;">Proline</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">746.89</td>
<td style="text-align: right;">314.91</td>
<td style="text-align: right;">278.00</td>
<td style="text-align: right;">500.50</td>
<td style="text-align: right;">673.50</td>
<td style="text-align: right;">985.00</td>
<td style="text-align: right;">1680.00</td>
<td style="text-align: left;">▇▇▅▃▁</td>
</tr>
</tbody>
</table>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>wine</span> <span class='op'>&lt;-</span></span>
<span>  <span class='va'>wine</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>mutate</span><span class='op'>(</span>Type <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>Type</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<p>For the EDA portion, let’s do a histogram to see the distribution of wine by alcalinity. I will also do a scatter plot to explore the relationship between alcalinity and color.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>wine</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>Alcalinity</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>geom_histogram</span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
<img src="exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/figure-html5/unnamed-chunk-4-1.png" width="576" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># probably no relationship</span></span>
<span><span class='va'>wine</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>Color</span>,</span>
<span>             y <span class='op'>=</span> <span class='va'>Alcalinity</span><span class='op'>)</span></span>
<span>         <span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>geom_smooth</span><span class='op'>(</span>method <span class='op'>=</span> <span class='st'>"lm"</span>,</span>
<span>              formula <span class='op'>=</span> <span class='va'>y</span><span class='op'>~</span><span class='va'>x</span>,</span>
<span>              color <span class='op'>=</span> <span class='st'>"grey70"</span>,</span>
<span>              se <span class='op'>=</span> <span class='cn'>F</span></span>
<span>              <span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>geom_point</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>color <span class='op'>=</span> <span class='va'>Alcohol</span><span class='op'>)</span>,</span>
<span>             alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>theme_bw</span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/figure-html5/unnamed-chunk-4-2.png" width="576" /></p>
</div>
<p>Normalize the dataset and execute PCA using the <code>tidymodels</code> framework.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># tidy models way</span></span>
<span><span class='va'>rec_wine</span> <span class='op'>&lt;-</span></span>
<span>  <span class='fu'>recipe</span><span class='op'>(</span>formula <span class='op'>=</span> <span class='op'>~</span><span class='va'>.</span>,</span>
<span>         data <span class='op'>=</span> <span class='va'>wine</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='co'># change roles to "id", instead could use step_rm to completely remove</span></span>
<span>  <span class='fu'>update_role</span><span class='op'>(</span><span class='va'>Type</span>,</span>
<span>              new_role <span class='op'>=</span> <span class='st'>"id"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>step_zv</span><span class='op'>(</span><span class='fu'>all_predictors</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>step_normalize</span><span class='op'>(</span><span class='fu'>all_predictors</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>step_pca</span><span class='op'>(</span><span class='fu'>all_predictors</span><span class='op'>(</span><span class='op'>)</span>, id<span class='op'>=</span><span class='st'>"pca_wine"</span>, threshold <span class='op'>=</span> <span class='fl'>0.9</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>prep_wine</span> <span class='op'>&lt;-</span> <span class='co'># note that PCA is step 3</span></span>
<span>  <span class='va'>rec_wine</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>prep</span><span class='op'>(</span>verbose <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>oper 1 step zv [training] 
oper 2 step normalize [training] 
oper 3 step pca [training] 
The retained training set is ~ 0.01 Mb  in memory.</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>prep_wine</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>tidy</span><span class='op'>(</span>id <span class='op'>=</span> <span class='st'>"pca_wine"</span>, type <span class='op'>=</span> <span class='st'>"variance"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>.</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code># A tibble: 52 × 4
   terms                         value component id      
   &lt;chr&gt;                         &lt;dbl&gt;     &lt;int&gt; &lt;chr&gt;   
 1 variance                      4.71          1 pca_wine
 2 variance                      2.50          2 pca_wine
 3 variance                      1.45          3 pca_wine
 4 variance                      0.919         4 pca_wine
 5 variance                      0.853         5 pca_wine
 6 variance                      0.642         6 pca_wine
 7 variance                      0.551         7 pca_wine
 8 variance                      0.348         8 pca_wine
 9 variance                      0.289         9 pca_wine
10 variance                      0.251        10 pca_wine
11 variance                      0.226        11 pca_wine
12 variance                      0.169        12 pca_wine
13 variance                      0.103        13 pca_wine
14 cumulative variance           4.71          1 pca_wine
15 cumulative variance           7.20          2 pca_wine
16 cumulative variance           8.65          3 pca_wine
17 cumulative variance           9.57          4 pca_wine
18 cumulative variance          10.4           5 pca_wine
19 cumulative variance          11.1           6 pca_wine
20 cumulative variance          11.6           7 pca_wine
21 cumulative variance          12.0           8 pca_wine
22 cumulative variance          12.3           9 pca_wine
23 cumulative variance          12.5          10 pca_wine
24 cumulative variance          12.7          11 pca_wine
25 cumulative variance          12.9          12 pca_wine
26 cumulative variance          13            13 pca_wine
27 percent variance             36.2           1 pca_wine
28 percent variance             19.2           2 pca_wine
29 percent variance             11.1           3 pca_wine
30 percent variance              7.07          4 pca_wine
31 percent variance              6.56          5 pca_wine
32 percent variance              4.94          6 pca_wine
33 percent variance              4.24          7 pca_wine
34 percent variance              2.68          8 pca_wine
35 percent variance              2.22          9 pca_wine
36 percent variance              1.93         10 pca_wine
37 percent variance              1.74         11 pca_wine
38 percent variance              1.30         12 pca_wine
39 percent variance              0.795        13 pca_wine
40 cumulative percent variance  36.2           1 pca_wine
41 cumulative percent variance  55.4           2 pca_wine
42 cumulative percent variance  66.5           3 pca_wine
43 cumulative percent variance  73.6           4 pca_wine
44 cumulative percent variance  80.2           5 pca_wine
45 cumulative percent variance  85.1           6 pca_wine
46 cumulative percent variance  89.3           7 pca_wine
47 cumulative percent variance  92.0           8 pca_wine
48 cumulative percent variance  94.2           9 pca_wine
49 cumulative percent variance  96.2          10 pca_wine
50 cumulative percent variance  97.9          11 pca_wine
51 cumulative percent variance  99.2          12 pca_wine
52 cumulative percent variance 100            13 pca_wine</code></pre>
</div>
<p>For the wine dataset, PC1 captures 36.2% of the variance and PC2 captures 19.2 percent of the variance in the dataset. Cumulative, that’s 55.4 percent of the dataset. It looks like we will need more PCs. To achieve 90% data “coverage”, we will need 8 principal components.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>tidy_wine_pca_loadings</span> <span class='op'>&lt;-</span></span>
<span>  <span class='va'>prep_wine</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>tidy</span><span class='op'>(</span>id <span class='op'>=</span> <span class='st'>"pca_wine"</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># plot the loadings for first 8 PCs</span></span>
<span><span class='va'>tidy_wine_pca_loadings</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>component</span> <span class='op'><a href='https://rdrr.io/r/base/match.html'>%in%</a></span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>"PC"</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>8</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>ggplot</span> <span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>value</span>,</span>
<span>              y <span class='op'>=</span> <span class='va'>terms</span>,</span>
<span>              fill <span class='op'>=</span> <span class='va'>terms</span></span>
<span>              <span class='op'>)</span></span>
<span>          <span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>geom_col</span><span class='op'>(</span>show.legend <span class='op'>=</span> <span class='cn'>F</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>facet_wrap</span><span class='op'>(</span><span class='va'>.</span><span class='op'>~</span> <span class='va'>component</span>,</span>
<span>             ncol <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>theme_bw</span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/figure-html5/unnamed-chunk-6-1.png" width="576" /></p>
</div>
<h3 id="question-2">Question 2:</h3>
<p>Load the bc dataset and check for any missing values.</p>
<p>Exclude the categorical variable, normalize the remaining data, and run PCA using tidymodels::.</p>
<p>Interpret the loadings of the first two principal components. What do these loadings tell us about the data?</p>
<p>Visualize the PCA results, with points colored by Class. Can PCA help differentiate between benign and malignant samples based on the first two principal components?</p>
<p>Load the data.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>bc</span> <span class='op'>&lt;-</span> <span class='fu'>read_csv</span><span class='op'>(</span><span class='st'>"bc.csv"</span><span class='op'>)</span></span>
<span><span class='fu'>skim</span><span class='op'>(</span><span class='va'>bc</span><span class='op'>)</span></span></code></pre>
</div>
<table>
<caption><span id="tab:unnamed-chunk-7">Table 2: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">bc</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">699</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">11</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">character</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">10</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table>
<colgroup>
<col style="width: 19%" />
<col style="width: 13%" />
<col style="width: 19%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 8%" />
<col style="width: 12%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">max</th>
<th style="text-align: right;">empty</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: right;">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Class</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 9%" />
<col style="width: 13%" />
<col style="width: 10%" />
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 8%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 8%" />
<col style="width: 5%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Id</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1071704.10</td>
<td style="text-align: right;">617095.73</td>
<td style="text-align: right;">61634</td>
<td style="text-align: right;">870688.5</td>
<td style="text-align: right;">1171710</td>
<td style="text-align: right;">1238298</td>
<td style="text-align: right;">13454352</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cl.thickness</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">4.42</td>
<td style="text-align: right;">2.82</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">▇▇▇▃▃</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cell.size</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">3.13</td>
<td style="text-align: right;">3.05</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">▇▂▁▁▂</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cell.shape</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">3.21</td>
<td style="text-align: right;">2.97</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">▇▂▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Marg.adhesion</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2.81</td>
<td style="text-align: right;">2.86</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">▇▂▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Epith.c.size</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">3.22</td>
<td style="text-align: right;">2.21</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">▇▂▂▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Bare.nuclei</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">0.98</td>
<td style="text-align: right;">3.54</td>
<td style="text-align: right;">3.64</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">▇▁▁▁▂</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bl.cromatin</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">3.44</td>
<td style="text-align: right;">2.44</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">▇▅▁▂▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Normal.nucleoli</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2.87</td>
<td style="text-align: right;">3.05</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Mitoses</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1.59</td>
<td style="text-align: right;">1.72</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
</tbody>
</table>
</div>
<p>16 missing values in feature <code>Bare.nucleoi</code>. I will use <code>step_impute_knn</code> to impute the missing values.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>rec_bc</span> <span class='op'>&lt;-</span></span>
<span>  <span class='fu'>recipe</span><span class='op'>(</span>formula <span class='op'>=</span> <span class='op'>~</span><span class='va'>.</span>,</span>
<span>         data <span class='op'>=</span> <span class='va'>bc</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='co'># change roles to "id", instead could use step_rm to completely remove</span></span>
<span>  <span class='fu'>update_role</span><span class='op'>(</span><span class='va'>Class</span>, <span class='va'>Id</span>,</span>
<span>              new_role <span class='op'>=</span> <span class='st'>"id"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>step_zv</span><span class='op'>(</span><span class='fu'>all_predictors</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>step_impute_knn</span><span class='op'>(</span><span class='va'>Bare.nuclei</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>step_normalize</span><span class='op'>(</span><span class='fu'>all_predictors</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>step_pca</span><span class='op'>(</span><span class='fu'>all_predictors</span><span class='op'>(</span><span class='op'>)</span>, id<span class='op'>=</span><span class='st'>"pca_bc"</span>, threshold <span class='op'>=</span> <span class='fl'>0.9</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>prep_bc</span> <span class='op'>&lt;-</span></span>
<span>  <span class='va'>rec_bc</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>prep</span><span class='op'>(</span>verbose <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>oper 1 step zv [training] 
oper 2 step impute knn [training] 
oper 3 step normalize [training] 
oper 4 step pca [training] 
The retained training set is ~ 0.04 Mb  in memory.</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>tidy_bc_pca_loadings</span> <span class='op'>&lt;-</span></span>
<span>  <span class='va'>prep_bc</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>tidy</span><span class='op'>(</span>id <span class='op'>=</span> <span class='st'>"pca_bc"</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># lets make a plot of PC1 and PC2</span></span>
<span><span class='va'>tidy_bc_pca_loadings</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>component</span> <span class='op'><a href='https://rdrr.io/r/base/match.html'>%in%</a></span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>"PC"</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>ggplot</span> <span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>value</span>,</span>
<span>              y <span class='op'>=</span> <span class='va'>terms</span>,</span>
<span>              fill <span class='op'>=</span> <span class='va'>terms</span></span>
<span>              <span class='op'>)</span></span>
<span>          <span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>geom_col</span><span class='op'>(</span>show.legend <span class='op'>=</span> <span class='cn'>F</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>facet_wrap</span><span class='op'>(</span><span class='va'>.</span><span class='op'>~</span> <span class='va'>component</span>,</span>
<span>             ncol <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>theme_bw</span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/figure-html5/unnamed-chunk-8-1.png" width="576" /></p>
</div>
<p>In PC1, all terms have negative loading values. In PC2, “Mitoses” is dominant in its effects. That’s interesting, lets examine a scatter plot. This is “extra credit”.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>prep_bc</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>juice</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>PC1</span>,</span>
<span>         y <span class='op'>=</span> <span class='va'>PC2</span>,</span>
<span>         color <span class='op'>=</span> <span class='va'>Class</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> <span class='co'># can change to cut, or color as well</span></span>
<span>  <span class='fu'>geom_point</span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>0.3</span><span class='op'>)</span><span class='op'>+</span></span>
<span>  <span class='fu'>labs</span><span class='op'>(</span>caption <span class='op'>=</span> <span class='st'>"Benign tumors tend to have positive PC1 loadings, and are centered close to 0 on PC2 loadings"</span><span class='op'>)</span><span class='op'>+</span></span>
<span>  <span class='fu'>theme</span><span class='op'>(</span>legend.position <span class='op'>=</span> <span class='st'>"bottom"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>theme_bw</span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/figure-html5/unnamed-chunk-9-1.png" width="576" /></p>
</div>
<h3 id="question-3">Question 3:</h3>
<p>Load the diamonds dataset and check the summary statistics of each variable.</p>
<p>Select only the numeric variables, normalize the data, and then perform PCA using tidymodels::.</p>
<p>How do you interpret the number of principal components? Do you think two principal components are sufficient to capture the major patterns in this dataset?</p>
<p>Generate a scatter plot of the first two principal components. Can you identify any clusters or outliers in the data?</p>
<p>Import the data and conduct brief EDA.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>diamonds</span> <span class='op'>&lt;-</span> <span class='fu'>read_csv</span><span class='op'>(</span><span class='st'>"diamonds.csv"</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># change character to factor</span></span>
<span><span class='va'>diamonds</span> <span class='op'>&lt;-</span></span>
<span>  <span class='va'>diamonds</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>mutate_if</span><span class='op'>(</span><span class='va'>is.character</span>, <span class='va'>as.factor</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># both summary and skim provide summary statistics</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>diamonds</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>     carat               cut        color        clarity     
 Min.   :0.2000   Fair     : 1610   D: 6775   SI1    :13065  
 1st Qu.:0.4000   Good     : 4906   E: 9797   VS2    :12258  
 Median :0.7000   Ideal    :21551   F: 9542   SI2    : 9194  
 Mean   :0.7979   Premium  :13791   G:11292   VS1    : 8171  
 3rd Qu.:1.0400   Very Good:12082   H: 8304   VVS2   : 5066  
 Max.   :5.0100                     I: 5422   VVS1   : 3655  
                                    J: 2808   (Other): 2531  
     depth           table           price             x         
 Min.   :43.00   Min.   :43.00   Min.   :  326   Min.   : 0.000  
 1st Qu.:61.00   1st Qu.:56.00   1st Qu.:  950   1st Qu.: 4.710  
 Median :61.80   Median :57.00   Median : 2401   Median : 5.700  
 Mean   :61.75   Mean   :57.46   Mean   : 3933   Mean   : 5.731  
 3rd Qu.:62.50   3rd Qu.:59.00   3rd Qu.: 5324   3rd Qu.: 6.540  
 Max.   :79.00   Max.   :95.00   Max.   :18823   Max.   :10.740  
                                                                 
       y                z         
 Min.   : 0.000   Min.   : 0.000  
 1st Qu.: 4.720   1st Qu.: 2.910  
 Median : 5.710   Median : 3.530  
 Mean   : 5.735   Mean   : 3.539  
 3rd Qu.: 6.540   3rd Qu.: 4.040  
 Max.   :58.900   Max.   :31.800  
                                  </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'>skim</span><span class='op'>(</span><span class='va'>diamonds</span><span class='op'>)</span></span></code></pre>
</div>
<table>
<caption><span id="tab:unnamed-chunk-10">Table 3: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">diamonds</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">53940</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">10</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">factor</td>
<td style="text-align: left;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">7</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 9%" />
<col style="width: 13%" />
<col style="width: 7%" />
<col style="width: 8%" />
<col style="width: 45%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: left;">ordered</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: left;">top_counts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">cut</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">Ide: 21551, Pre: 13791, Ver: 12082, Goo: 4906</td>
</tr>
<tr class="even">
<td style="text-align: left;">color</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">G: 11292, E: 9797, F: 9542, H: 8304</td>
</tr>
<tr class="odd">
<td style="text-align: left;">clarity</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">8</td>
<td style="text-align: left;">SI1: 13065, VS2: 12258, SI2: 9194, VS1: 8171</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table style="width:100%;">
<colgroup>
<col style="width: 14%" />
<col style="width: 10%" />
<col style="width: 14%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 6%" />
<col style="width: 7%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 9%" />
<col style="width: 6%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">carat</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.80</td>
<td style="text-align: right;">0.47</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: right;">0.40</td>
<td style="text-align: right;">0.70</td>
<td style="text-align: right;">1.04</td>
<td style="text-align: right;">5.01</td>
<td style="text-align: left;">▇▂▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">depth</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">61.75</td>
<td style="text-align: right;">1.43</td>
<td style="text-align: right;">43.0</td>
<td style="text-align: right;">61.00</td>
<td style="text-align: right;">61.80</td>
<td style="text-align: right;">62.50</td>
<td style="text-align: right;">79.00</td>
<td style="text-align: left;">▁▁▇▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">table</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">57.46</td>
<td style="text-align: right;">2.23</td>
<td style="text-align: right;">43.0</td>
<td style="text-align: right;">56.00</td>
<td style="text-align: right;">57.00</td>
<td style="text-align: right;">59.00</td>
<td style="text-align: right;">95.00</td>
<td style="text-align: left;">▁▇▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">price</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3932.80</td>
<td style="text-align: right;">3989.44</td>
<td style="text-align: right;">326.0</td>
<td style="text-align: right;">950.00</td>
<td style="text-align: right;">2401.00</td>
<td style="text-align: right;">5324.25</td>
<td style="text-align: right;">18823.00</td>
<td style="text-align: left;">▇▂▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">x</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5.73</td>
<td style="text-align: right;">1.12</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">4.71</td>
<td style="text-align: right;">5.70</td>
<td style="text-align: right;">6.54</td>
<td style="text-align: right;">10.74</td>
<td style="text-align: left;">▁▁▇▃▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">y</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5.73</td>
<td style="text-align: right;">1.14</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">4.72</td>
<td style="text-align: right;">5.71</td>
<td style="text-align: right;">6.54</td>
<td style="text-align: right;">58.90</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">z</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.54</td>
<td style="text-align: right;">0.71</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">2.91</td>
<td style="text-align: right;">3.53</td>
<td style="text-align: right;">4.04</td>
<td style="text-align: right;">31.80</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
</tbody>
</table>
</div>
<p>Perform PCA the <code>tidymodel</code> way. As we can see from the summary table, 2 PCs cover about 86.4% of the data, while 3 PCs cover about 96.3%. Hence, if we use 90% as the threshold, 3 PCs would be sufficient.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># tidy models way</span></span>
<span><span class='va'>rec_diamonds</span> <span class='op'>&lt;-</span></span>
<span>  <span class='fu'>recipe</span><span class='op'>(</span>formula <span class='op'>=</span> <span class='op'>~</span><span class='va'>.</span>,</span>
<span>         data <span class='op'>=</span> <span class='va'>diamonds</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='co'># change roles to "id", instead could use step_rm to completely remove</span></span>
<span>  <span class='fu'>update_role</span><span class='op'>(</span><span class='va'>cut</span>, <span class='va'>color</span>, <span class='va'>clarity</span>,</span>
<span>              new_role <span class='op'>=</span> <span class='st'>"id"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>step_zv</span><span class='op'>(</span><span class='fu'>all_predictors</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>step_normalize</span><span class='op'>(</span><span class='fu'>all_predictors</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>step_pca</span><span class='op'>(</span><span class='fu'>all_predictors</span><span class='op'>(</span><span class='op'>)</span>, id<span class='op'>=</span><span class='st'>"pca"</span>, threshold <span class='op'>=</span> <span class='fl'>0.9</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>prep_diamond</span> <span class='op'>&lt;-</span> <span class='co'># note that PCA is step 3</span></span>
<span>  <span class='va'>rec_diamonds</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>prep</span><span class='op'>(</span>verbose <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>oper 1 step zv [training] 
oper 2 step normalize [training] 
oper 3 step pca [training] 
The retained training set is ~ 1.86 Mb  in memory.</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># to obtain loadings. Here you're telling tidy to tidy the step of recipe with id=pca</span></span>
<span><span class='va'>tidy_diamond_pca_loadings</span> <span class='op'>&lt;-</span></span>
<span>  <span class='va'>prep_diamond</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>tidy</span><span class='op'>(</span>id <span class='op'>=</span> <span class='st'>"pca"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>pivot_wider</span><span class='op'>(</span>id_cols <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>terms</span>, <span class='va'>id</span><span class='op'>)</span>,</span>
<span>              names_from <span class='op'>=</span> <span class='va'>component</span>,</span>
<span>              values_from <span class='op'>=</span> <span class='va'>value</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># this also obtains loadings. Here you are tidy-ing the 3rd step of the recipe</span></span>
<span><span class='va'>prep_diamond</span> <span class='op'>%&gt;%</span> <span class='fu'>tidy</span><span class='op'>(</span><span class='fl'>3</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code># A tibble: 49 × 4
   terms     value component id   
   &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;
 1 carat  0.452    PC1       pca  
 2 depth -0.000916 PC1       pca  
 3 table  0.0995   PC1       pca  
 4 price  0.426    PC1       pca  
 5 x      0.453    PC1       pca  
 6 y      0.447    PC1       pca  
 7 z      0.446    PC1       pca  
 8 carat -0.0347   PC2       pca  
 9 depth -0.731    PC2       pca  
10 table  0.675    PC2       pca  
# ℹ 39 more rows</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># this is how you "extract" standard deviation, variance, and cumulative from a prep recipe using the tidymodels way</span></span>
<span><span class='co'># info is stored in a list, so you need to go inside and "dig" for it</span></span>
<span><span class='va'>prep_diamond</span><span class='op'>$</span><span class='va'>steps</span><span class='op'>[[</span><span class='fl'>3</span><span class='op'>]</span><span class='op'>]</span><span class='op'>$</span><span class='va'>res</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>Importance of components:
                          PC1    PC2     PC3     PC4     PC5     PC6
Standard deviation     2.1826 1.1340 0.83115 0.41684 0.20077 0.18151
Proportion of Variance 0.6806 0.1837 0.09869 0.02482 0.00576 0.00471
Cumulative Proportion  0.6806 0.8642 0.96294 0.98776 0.99352 0.99823
                           PC7
Standard deviation     0.11135
Proportion of Variance 0.00177
Cumulative Proportion  1.00000</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>#this will get you similar information, as a tibble, so you can make a screeplot</span></span>
<span><span class='va'>diamond_variance</span> <span class='op'>&lt;-</span></span>
<span>  <span class='va'>prep_diamond</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>tidy</span><span class='op'>(</span>id <span class='op'>=</span> <span class='st'>"pca"</span>, type <span class='op'>=</span> <span class='st'>"variance"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>.</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code># A tibble: 28 × 4
   terms                          value component id   
   &lt;chr&gt;                          &lt;dbl&gt;     &lt;int&gt; &lt;chr&gt;
 1 variance                      4.76           1 pca  
 2 variance                      1.29           2 pca  
 3 variance                      0.691          3 pca  
 4 variance                      0.174          4 pca  
 5 variance                      0.0403         5 pca  
 6 variance                      0.0329         6 pca  
 7 variance                      0.0124         7 pca  
 8 cumulative variance           4.76           1 pca  
 9 cumulative variance           6.05           2 pca  
10 cumulative variance           6.74           3 pca  
11 cumulative variance           6.91           4 pca  
12 cumulative variance           6.95           5 pca  
13 cumulative variance           6.99           6 pca  
14 cumulative variance           7.00           7 pca  
15 percent variance             68.1            1 pca  
16 percent variance             18.4            2 pca  
17 percent variance              9.87           3 pca  
18 percent variance              2.48           4 pca  
19 percent variance              0.576          5 pca  
20 percent variance              0.471          6 pca  
21 percent variance              0.177          7 pca  
22 cumulative percent variance  68.1            1 pca  
23 cumulative percent variance  86.4            2 pca  
24 cumulative percent variance  96.3            3 pca  
25 cumulative percent variance  98.8            4 pca  
26 cumulative percent variance  99.4            5 pca  
27 cumulative percent variance  99.8            6 pca  
28 cumulative percent variance 100              7 pca  </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>## basic scree plot</span></span>
<span><span class='va'>diamond_variance</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>terms</span> <span class='op'>==</span> <span class='st'>"percent variance"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>component</span>,</span>
<span>             y <span class='op'>=</span> <span class='va'>value</span><span class='op'>)</span></span>
<span>         <span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>geom_col</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>theme_bw</span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/figure-html5/unnamed-chunk-11-1.png" width="576" /></p>
</div>
<p>Scatter plot of PC1 and PC2. We can see that outliers exist.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># when you juice a prep recipe, you get the individual data and their values on the principal components. You can use this to  make a scatter plot</span></span>
<span><span class='va'>juice_diamonds</span> <span class='op'>&lt;-</span></span>
<span>  <span class='va'>prep_diamond</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>juice</span><span class='op'>(</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># this plot shows individual diamonds plotted on the new scale PC1, PC2</span></span>
<span><span class='va'>juice_diamonds</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>PC1</span>,</span>
<span>         y <span class='op'>=</span> <span class='va'>PC2</span>,</span>
<span>         color <span class='op'>=</span> <span class='va'>clarity</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> <span class='co'># can change to cut, or color as well</span></span>
<span>  <span class='fu'>geom_point</span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>0.3</span><span class='op'>)</span><span class='op'>+</span></span>
<span>  <span class='co'># here we use geom text to label potential outliers by color</span></span>
<span>  <span class='fu'>geom_text</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>juice_diamonds</span> <span class='op'>%&gt;%</span> </span>
<span>              <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>PC1</span> <span class='op'>&gt;</span> <span class='fl'>10</span> <span class='op'>|</span> <span class='va'>PC1</span> <span class='op'>&lt;</span> <span class='op'>-</span><span class='fl'>5</span> <span class='op'>|</span> <span class='va'>PC2</span> <span class='op'>&gt;</span> <span class='fl'>7</span> <span class='op'>|</span> <span class='va'>PC2</span> <span class='op'>&lt;</span> <span class='op'>-</span><span class='fl'>7</span><span class='op'>)</span>,</span>
<span>            <span class='fu'>aes</span><span class='op'>(</span>label <span class='op'>=</span> <span class='va'>color</span><span class='op'>)</span>,</span>
<span>            check_overlap <span class='op'>=</span> <span class='cn'>T</span>, </span>
<span>            color <span class='op'>=</span> <span class='st'>"black"</span>,</span>
<span>            size <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>theme_bw</span><span class='op'>(</span><span class='op'>)</span><span class='op'>+</span></span>
<span>  <span class='fu'>theme</span><span class='op'>(</span>legend.position <span class='op'>=</span> <span class='st'>"bottom"</span><span class='op'>)</span> </span></code></pre>
</div>
<p><img src="exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/figure-html5/unnamed-chunk-12-1.png" width="576" /></p>
</div>
<h3 id="question-4">Question 4:</h3>
<p>Load the housing dataset and investigate its correlations.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>housing</span> <span class='op'>&lt;-</span> <span class='fu'>read_csv</span><span class='op'>(</span><span class='st'>"housing.csv"</span><span class='op'>)</span></span>
<span><span class='fu'>skim</span><span class='op'>(</span><span class='va'>housing</span><span class='op'>)</span></span></code></pre>
</div>
<table>
<caption><span id="tab:unnamed-chunk-13">Table 4: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">housing</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">506</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">14</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">14</td>
</tr>
<tr class="odd">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table style="width:100%;">
<colgroup>
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 6%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">crim</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.61</td>
<td style="text-align: right;">8.60</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">0.08</td>
<td style="text-align: right;">0.26</td>
<td style="text-align: right;">3.68</td>
<td style="text-align: right;">88.98</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">zn</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">11.36</td>
<td style="text-align: right;">23.32</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">12.50</td>
<td style="text-align: right;">100.00</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">indus</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">11.14</td>
<td style="text-align: right;">6.86</td>
<td style="text-align: right;">0.46</td>
<td style="text-align: right;">5.19</td>
<td style="text-align: right;">9.69</td>
<td style="text-align: right;">18.10</td>
<td style="text-align: right;">27.74</td>
<td style="text-align: left;">▇▆▁▇▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">chas</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.07</td>
<td style="text-align: right;">0.25</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">nox</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.55</td>
<td style="text-align: right;">0.12</td>
<td style="text-align: right;">0.38</td>
<td style="text-align: right;">0.45</td>
<td style="text-align: right;">0.54</td>
<td style="text-align: right;">0.62</td>
<td style="text-align: right;">0.87</td>
<td style="text-align: left;">▇▇▆▅▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">rm</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">6.28</td>
<td style="text-align: right;">0.70</td>
<td style="text-align: right;">3.56</td>
<td style="text-align: right;">5.89</td>
<td style="text-align: right;">6.21</td>
<td style="text-align: right;">6.62</td>
<td style="text-align: right;">8.78</td>
<td style="text-align: left;">▁▂▇▂▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">age</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">68.57</td>
<td style="text-align: right;">28.15</td>
<td style="text-align: right;">2.90</td>
<td style="text-align: right;">45.02</td>
<td style="text-align: right;">77.50</td>
<td style="text-align: right;">94.07</td>
<td style="text-align: right;">100.00</td>
<td style="text-align: left;">▂▂▂▃▇</td>
</tr>
<tr class="even">
<td style="text-align: left;">dis</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.80</td>
<td style="text-align: right;">2.11</td>
<td style="text-align: right;">1.13</td>
<td style="text-align: right;">2.10</td>
<td style="text-align: right;">3.21</td>
<td style="text-align: right;">5.19</td>
<td style="text-align: right;">12.13</td>
<td style="text-align: left;">▇▅▂▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">rad</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">9.55</td>
<td style="text-align: right;">8.71</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">4.00</td>
<td style="text-align: right;">5.00</td>
<td style="text-align: right;">24.00</td>
<td style="text-align: right;">24.00</td>
<td style="text-align: left;">▇▂▁▁▃</td>
</tr>
<tr class="even">
<td style="text-align: left;">tax</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">408.24</td>
<td style="text-align: right;">168.54</td>
<td style="text-align: right;">187.00</td>
<td style="text-align: right;">279.00</td>
<td style="text-align: right;">330.00</td>
<td style="text-align: right;">666.00</td>
<td style="text-align: right;">711.00</td>
<td style="text-align: left;">▇▇▃▁▇</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ptratio</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">18.46</td>
<td style="text-align: right;">2.16</td>
<td style="text-align: right;">12.60</td>
<td style="text-align: right;">17.40</td>
<td style="text-align: right;">19.05</td>
<td style="text-align: right;">20.20</td>
<td style="text-align: right;">22.00</td>
<td style="text-align: left;">▁▃▅▅▇</td>
</tr>
<tr class="even">
<td style="text-align: left;">black</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">356.67</td>
<td style="text-align: right;">91.29</td>
<td style="text-align: right;">0.32</td>
<td style="text-align: right;">375.38</td>
<td style="text-align: right;">391.44</td>
<td style="text-align: right;">396.22</td>
<td style="text-align: right;">396.90</td>
<td style="text-align: left;">▁▁▁▁▇</td>
</tr>
<tr class="odd">
<td style="text-align: left;">lstat</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">12.65</td>
<td style="text-align: right;">7.14</td>
<td style="text-align: right;">1.73</td>
<td style="text-align: right;">6.95</td>
<td style="text-align: right;">11.36</td>
<td style="text-align: right;">16.96</td>
<td style="text-align: right;">37.97</td>
<td style="text-align: left;">▇▇▅▂▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">medv</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">22.53</td>
<td style="text-align: right;">9.20</td>
<td style="text-align: right;">5.00</td>
<td style="text-align: right;">17.02</td>
<td style="text-align: right;">21.20</td>
<td style="text-align: right;">25.00</td>
<td style="text-align: right;">50.00</td>
<td style="text-align: left;">▂▇▅▁▁</td>
</tr>
</tbody>
</table>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>## chas appears to be a binary feature. Will exclude in correlation analysis</span></span>
<span></span>
<span><span class='va'>housing</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='op'>-</span><span class='va'>chas</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>as.matrix</a></span><span class='op'>(</span><span class='va'>.</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>Hmisc</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/Hmisc/man/rcorr.html'>rcorr</a></span><span class='op'>(</span><span class='va'>.</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>tidy</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>mutate</span><span class='op'>(</span>absCorr <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>abs</a></span><span class='op'>(</span><span class='va'>estimate</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>column1</span>, <span class='va'>column2</span>, <span class='va'>absCorr</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>datatable</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>formatRound</span><span class='op'>(</span>columns <span class='op'>=</span> <span class='st'>"absCorr"</span>,</span>
<span>              digits <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span></span></code></pre>
</div>
<div class="datatables html-widget html-fill-item" id="htmlwidget-4acb6b9f5b604d3b09c0" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-4acb6b9f5b604d3b09c0">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78"],["zn","indus","indus","nox","nox","nox","rm","rm","rm","rm","age","age","age","age","age","dis","dis","dis","dis","dis","dis","rad","rad","rad","rad","rad","rad","rad","tax","tax","tax","tax","tax","tax","tax","tax","ptratio","ptratio","ptratio","ptratio","ptratio","ptratio","ptratio","ptratio","ptratio","black","black","black","black","black","black","black","black","black","black","lstat","lstat","lstat","lstat","lstat","lstat","lstat","lstat","lstat","lstat","lstat","medv","medv","medv","medv","medv","medv","medv","medv","medv","medv","medv","medv"],["crim","crim","zn","crim","zn","indus","crim","zn","indus","nox","crim","zn","indus","nox","rm","crim","zn","indus","nox","rm","age","crim","zn","indus","nox","rm","age","dis","crim","zn","indus","nox","rm","age","dis","rad","crim","zn","indus","nox","rm","age","dis","rad","tax","crim","zn","indus","nox","rm","age","dis","rad","tax","ptratio","crim","zn","indus","nox","rm","age","dis","rad","tax","ptratio","black","crim","zn","indus","nox","rm","age","dis","rad","tax","ptratio","black","lstat"],[0.2004692196625475,0.4065834114062584,0.5338281863044722,0.4209717113924636,0.5166037078279926,0.7636514469209083,0.2192467028625307,0.3119905873741037,0.3916758526569141,0.3021881878496718,0.3527342509013627,0.5695373420992126,0.644778511355246,0.7314701037859637,0.2402649310477851,0.379670086951024,0.6644082227621095,0.7080269887427715,0.7692301132258333,0.2052462129300469,0.7478805408686301,0.6255051452626024,0.3119478260185367,0.5951292746038487,0.6114405634856123,0.2098466677661279,0.4560224517516127,0.4945879296720742,0.5827643120325854,0.3145633246775996,0.7207601799515596,0.668023200403029,0.2920478326232961,0.5064555935507055,0.5344315844084523,0.9102281885331872,0.2899455792795215,0.3916785479362322,0.3832475564288127,0.1889326771128377,0.3555014945594425,0.2615150116719434,0.2324705424082736,0.4647411785030869,0.4608530350657887,0.3850639419942089,0.1755203173828263,0.3569765351041912,0.3800506377923417,0.1280686350925941,0.2735339766384911,0.2915116731330398,0.444412815575105,0.4418080067227823,0.177383302305211,0.4556214794479473,0.4129945745270046,0.6037997164766195,0.5908789208808682,0.6138082718664508,0.6023385287262362,0.4969958308636846,0.4886763349750694,0.5439934120015731,0.374044316714662,0.3660869016915728,0.3883046085868161,0.3604453424505448,0.4837251600283872,0.4273207723733045,0.6953599470715358,0.3769545650046082,0.2499287340859041,0.3816262306397852,0.4685359335677797,0.5077866855376105,0.3334608196570746,0.7376627261740299]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>column1<\/th>\n      <th>column2<\/th>\n      <th>absCorr<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"targets":3,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 3, 3, \",\", \".\", null);\n  }"},{"className":"dt-right","targets":3},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"column1","targets":1},{"name":"column2","targets":2},{"name":"absCorr","targets":3}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":["options.columnDefs.0.render"],"jsHooks":[]}</script>
</div>
<p>Since I’ve already done 3 examples using <code>tidymodels</code> method, for Question 4, I will practice using <code>prcomp</code> for the PCA explorations.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>##check for NA</span></span>
<span><span class='va'>housing</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>map_dbl</span><span class='op'>(</span></span>
<span>    <span class='kw'>function</span> <span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>)</span></span>
<span>  <span class='op'>)</span></span></code></pre>
</div>
<pre><code>   crim      zn   indus    chas     nox      rm     age     dis 
      0       0       0       0       0       0       0       0 
    rad     tax ptratio   black   lstat    medv 
      0       0       0       0       0       0 </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>housing_PCA</span> <span class='op'>&lt;-</span></span>
<span>  <span class='va'>housing</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'><a href='https://rdrr.io/r/stats/prcomp.html'>prcomp</a></span><span class='op'>(</span>scale <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># we can use tidy(matrix = "xxxx") to get some useful info</span></span>
<span></span>
<span><span class='co'># self explanatory, we obtain loadings</span></span>
<span><span class='va'>housing_PCA</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>tidy</span><span class='op'>(</span>matrix <span class='op'>=</span> <span class='st'>"loadings"</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code># A tibble: 196 × 3
   column    PC    value
   &lt;chr&gt;  &lt;dbl&gt;    &lt;dbl&gt;
 1 crim       1  0.242  
 2 crim       2 -0.0659 
 3 crim       3  0.395  
 4 crim       4  0.100  
 5 crim       5 -0.00496
 6 crim       6  0.225  
 7 crim       7 -0.777  
 8 crim       8  0.157  
 9 crim       9 -0.254  
10 crim      10 -0.0714 
# ℹ 186 more rows</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># self explanatory again, except you need to square the std.dev to get eigenvalues</span></span>
<span></span>
<span><span class='va'>scale</span> <span class='op'>&lt;-</span> <span class='fl'>10</span></span>
<span><span class='va'>housing_PCA</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>tidy</span><span class='op'>(</span>matrix <span class='op'>=</span> <span class='st'>"eigenvalues"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>mutate</span><span class='op'>(</span>eigenvalues <span class='op'>=</span> <span class='va'>std.dev</span><span class='op'>^</span><span class='fl'>2</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span><span class='co'>#we can continue to do a scree plot. Lets put in some effort and do a SUPER nice one</span></span>
<span>  <span class='fu'>slice_max</span><span class='op'>(</span>order_by <span class='op'>=</span> <span class='va'>percent</span>, n <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>PC</span><span class='op'>)</span></span>
<span>         <span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>geom_point</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>eigenvalues</span>,</span>
<span>                 size <span class='op'>=</span> <span class='va'>eigenvalues</span><span class='op'>)</span>,</span>
<span>             color <span class='op'>=</span> <span class='st'>"dodgerblue"</span>,</span>
<span>             show.legend <span class='op'>=</span> <span class='cn'>F</span></span>
<span>             <span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>geom_line</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>eigenvalues</span><span class='op'>)</span>,</span>
<span>            color <span class='op'>=</span> <span class='st'>"tomato3"</span>,</span>
<span>            linewidth <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span><span class='op'>+</span> </span>
<span>  <span class='fu'>geom_col</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>percent</span><span class='op'>*</span><span class='va'>scale</span><span class='op'>)</span></span>
<span>           <span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>scale_y_continuous</span><span class='op'>(</span>sec.axis <span class='op'>=</span> <span class='fu'>sec_axis</span><span class='op'>(</span><span class='op'>~</span><span class='va'>.</span><span class='op'>/</span><span class='va'>scale</span>, name<span class='op'>=</span><span class='st'>"percent"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>theme_bw</span><span class='op'>(</span><span class='op'>)</span><span class='op'>+</span></span>
<span>  <span class='fu'>labs</span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"A nicer scree plot - Housing PCA"</span><span class='op'>)</span></span></code></pre>
</div>
<img src="exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/figure-html5/unnamed-chunk-14-1.png" width="576" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span>  <span class='fu'>theme</span><span class='op'>(</span>legend.position <span class='op'>=</span> <span class='st'>"none"</span><span class='op'>)</span> </span></code></pre>
</div>
<pre><code>List of 1
 $ legend.position: chr &quot;none&quot;
 - attr(*, &quot;class&quot;)= chr [1:2] &quot;theme&quot; &quot;gg&quot;
 - attr(*, &quot;complete&quot;)= logi FALSE
 - attr(*, &quot;validate&quot;)= logi TRUE</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># Same as doing this</span></span>
<span><span class='va'>housing_PCA</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>tidy</span><span class='op'>(</span>matrix <span class='op'>=</span> <span class='st'>"scores"</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code># A tibble: 7,084 × 3
     row    PC   value
   &lt;int&gt; &lt;dbl&gt;   &lt;dbl&gt;
 1     1     1 -2.09  
 2     1     2  0.492 
 3     1     3 -0.336 
 4     1     4 -0.0281
 5     1     5 -1.01  
 6     1     6  0.262 
 7     1     7 -0.328 
 8     1     8  0.160 
 9     1     9  0.471 
10     1    10 -0.206 
# ℹ 7,074 more rows</code></pre>
</div>
<p>In order to achieve a threshold of 90%, I will need 8 principal components.
PC1 explains 46.8 percent of the variance, while PC2 explains 11.8 percent. Cumulatively, PC1 and PC2 explain about 58.5% of the variance.</p>
<p>Let’s visualize the PCA results.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>housing_PCA</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>tidy</span><span class='op'>(</span>matrix <span class='op'>=</span> <span class='st'>"loadings"</span><span class='op'>)</span> <span class='op'>%&gt;%</span></span>
<span>  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>PC</span> <span class='op'><a href='https://rdrr.io/r/base/match.html'>%in%</a></span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>8</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>ggplot</span> <span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>value</span>,</span>
<span>              y <span class='op'>=</span> <span class='va'>column</span>,</span>
<span>              fill <span class='op'>=</span> <span class='va'>column</span></span>
<span>              <span class='op'>)</span></span>
<span>          <span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>geom_col</span><span class='op'>(</span>show.legend <span class='op'>=</span> <span class='cn'>F</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>facet_wrap</span><span class='op'>(</span><span class='va'>.</span><span class='op'>~</span> <span class='va'>PC</span>,</span>
<span>             ncol <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>theme_bw</span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/figure-html5/unnamed-chunk-15-1.png" width="576" /></p>
</div>
<p>Not sure how much I can see from the above plot :( Let’s try something else</p>
<div class="layout-chunk" data-layout="l-body-outset">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>housing_PCA</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>tidy</span><span class='op'>(</span>matrix <span class='op'>=</span> <span class='st'>"scores"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>PC</span> <span class='op'>&lt;=</span> <span class='fl'>2</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>pivot_wider</span><span class='op'>(</span>id_cols <span class='op'>=</span> <span class='st'>"row"</span>,</span>
<span>              names_from <span class='op'>=</span> <span class='va'>PC</span>,</span>
<span>              names_prefix <span class='op'>=</span> <span class='st'>"PC"</span>,</span>
<span>              values_from <span class='op'>=</span> <span class='va'>value</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='va'>housing</span><span class='op'>)</span> <span class='op'>%&gt;%</span> </span>
<span>  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>PC1</span>,</span>
<span>             y <span class='op'>=</span> <span class='va'>PC2</span>,</span>
<span>             color <span class='op'>=</span> <span class='va'>age</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>geom_point</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>guides</span><span class='op'>(</span>color <span class='op'>=</span> <span class='fu'>guide_colourbar</span><span class='op'>(</span>barwidth <span class='op'>=</span> <span class='fl'>1</span>,</span>
<span>                                barheight <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span><span class='op'>+</span></span>
<span>  <span class='fu'>labs</span><span class='op'>(</span>caption <span class='op'>=</span> <span class='st'>"Older properties tend to have positive loadings in PC1,\n</span></span>
<span><span class='st'>       while newer properties tend to have negative PC1 &amp; PC2 loadings"</span><span class='op'>)</span><span class='op'>+</span></span>
<span>  <span class='fu'>theme_bw</span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="exploring-principal-component-analysis-with-tidymodels-and-prcomp_files/figure-html5/unnamed-chunk-16-1.png" width="576" data-distill-preview=1 /></p>
</div>
This is the end of the homework assignment.
<div class="layout-chunk" data-layout="l-body-outset">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/save.html'>save.image</a></span><span class='op'>(</span><span class='st'>"group_assignment3.RData"</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<div class="sourceCode" id="cb13"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
